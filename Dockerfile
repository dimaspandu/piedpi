# -------------------------------------------------
# Piedpi â€“ Minimal PHP Runtime
# -------------------------------------------------
FROM php:8.3-cli-alpine

# -------------------------------------------------
# Install required PHP extensions
# -------------------------------------------------
RUN docker-php-ext-install pdo pdo_mysql

# -------------------------------------------------
# Set working directory
# -------------------------------------------------
WORKDIR /app

# -------------------------------------------------
# Copy application source
# -------------------------------------------------
COPY . .

# -------------------------------------------------
# Expose application port
# -------------------------------------------------
EXPOSE 8080

# -------------------------------------------------
# Environment defaults (safe for production)
# -------------------------------------------------
ENV APP_ENV=production
ENV APP_DEBUG=false

# -------------------------------------------------
# Start PHP built-in server
# - Document root is /public
# -------------------------------------------------
CMD ["php", "-S", "0.0.0.0:8080", "-t", "public"]
